<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>直近のクエリから結果セットを転送する</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mysqli.stmt-init.html">mysqli::stmt_init</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mysqli.thread-id.html">mysqli::$thread_id</a></div>
 <div class="up"><a href="class.mysqli.html">mysqli</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="mysqli.store-result" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mysqli::store_result</h1>
  <h1 class="refname">mysqli_store_result</h1>
  <p class="verinfo">(PHP 5)</p><p class="refpurpose"><span class="refname">mysqli::store_result</span> -- <span class="refname">mysqli_store_result</span> &mdash; <span class="dc-title">直近のクエリから結果セットを転送する</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-mysqli.store-result-description">
  <h3 class="title">説明</h3>
  <p class="para">オブジェクト指向型</p>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="class.mysqli-result.html" class="type mysqli_result">mysqli_result</a></span> <span class="methodname"><strong>mysqli::store_result</strong></span>
    ([ <span class="methodparam"><span class="type">int</span> <code class="parameter">$option</code></span>
  ] )</div>

  <p class="para rdfs-comment">手続き型</p>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="class.mysqli-result.html" class="type mysqli_result">mysqli_result</a></span> <span class="methodname"><strong>mysqli_store_result</strong></span>
    ([ <span class="methodparam"><span class="type">int</span> <code class="parameter">$option</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   <span class="function"><a href="mysqli-result.data-seek.html" class="function">mysqli_data_seek()</a></span> で使用される、
   <code class="parameter">link</code> で表されたデータベース接続の直近のクエリ
   から結果セットを転送します。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-mysqli.store-result-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

   <dt>
<code class="parameter">
link</code></dt>
<dd>
<p class="para">手続き型のみ:
<span class="function"><a href="function.mysqli-connect.html" class="function">mysqli_connect()</a></span> あるいは <span class="function"><a href="mysqli.init.html" class="function">mysqli_init()</a></span> が返すリンク ID。
</p></dd>

   
     <dt>
<code class="parameter">option</code></dt>

     <dd>

      <p class="para">
       指定したいオプション。以下のいずれかの値を指定します。
       <table class="doctable table">
        <caption><strong>有効なオプション</strong></caption>
        
         <thead>
          <tr>
           <th>名前</th>
           <th>説明</th>
          </tr>

         </thead>

         <tbody class="tbody">
          <tr>
           <td><strong><code>MYSQLI_STORE_RESULT_COPY_DATA</code></strong></td>
           <td>
           結果を、内部の mysqlnd バッファーから PHP の変数にコピーします。
           デフォルトでは、mysqlnd は参照を利用しており、メモリ内の結果をコピーしたり複製したりしないようにしています。
           ある種の結果セット (短めの行を大量に保持する結果セットなど) の場合は、
           コピーしたほうが、全体的なメモリ使用量を抑えることができます。
           結果を保持する PHP の変数のほうが、解放されるのが早いからです。
           これは mysqlnd でのみ利用可能で、PHP 5.6.0 以降で使えます。</td>
          </tr>

         </tbody>
        
       </table>

      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-mysqli.store-result-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   バッファに格納した結果オブジェクトを返します。エラー時には <strong><code>FALSE</code></strong> を返します。
  </p>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    <span class="function"><strong>mysqli_store_result()</strong></span> は、クエリが結果セットを
    返さなかった場合（例えば、クエリが INSERT 文であった場合）に
    <strong><code>FALSE</code></strong> を返します。また、結果セットの読み込みに失敗した場合にも
    <strong><code>FALSE</code></strong> を返します。エラーが発生したかどうかを調べるには、
    <span class="function"><a href="mysqli.error.html" class="function">mysqli_error()</a></span> が空文字列以外を返す・
    <span class="function"><a href="mysqli.errno.html" class="function">mysqli_errno()</a></span> がゼロ以外の値を返す・あるいは
    <span class="function"><a href="mysqli.field-count.html" class="function">mysqli_field_count()</a></span> がゼロ以外の値を返す
    のいずれかを確認します。それ以外にこの関数が <strong><code>FALSE</code></strong> を返す理由としては
    <span class="function"><a href="mysqli.query.html" class="function">mysqli_query()</a></span> のコールに成功して返された
    結果セットが大きすぎる（メモリに割り当てられない）場合がありえます。
    もし <span class="function"><a href="mysqli.field-count.html" class="function">mysqli_field_count()</a></span> がゼロ以外の値を
    返した場合、文は空でない結果セットを生成しています。
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 notes" id="refsect1-mysqli.store-result-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    クエリ結果が使用するメモリを <span class="function"><a href="mysqli-result.free.html" class="function">mysqli_free_result()</a></span>
    関数で開放するのは、どんな場合でも大切です。しかし、大きい結果セットを
    <span class="function"><strong>mysqli_store_result()</strong></span> で転送した際は、特にこれが
    重要となります。
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 examples" id="refsect1-mysqli.store-result-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <span class="function"><a href="mysqli.multi-query.html" class="function">mysqli_multi_query()</a></span> を参照ください。
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-mysqli.store-result-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="mysqli.real-query.html" class="function" rel="rdfs-seeAlso">mysqli_real_query()</a> - SQL クエリを実行する</span></li>
    <li class="member"><span class="function"><a href="mysqli.use-result.html" class="function" rel="rdfs-seeAlso">mysqli_use_result()</a> - 結果セットの取得を開始する</span></li>
   </ul>
  </p>
 </div>


</div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mysqli.stmt-init.html">mysqli::stmt_init</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mysqli.thread-id.html">mysqli::$thread_id</a></div>
 <div class="up"><a href="class.mysqli.html">mysqli</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
